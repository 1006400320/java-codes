### 如何解决Redis缓存雪崩、缓存穿透、缓存并发等5大难题
> 原文： [如何解决Redis缓存雪崩、缓存穿透、缓存并发等5大难题](https://stor.51cto.com/art/201812/588742.htm)



#### 1.缓存雪崩

数据未加载到缓存中，或者缓存同一时间大面积的失效，**从而导致所有请求都去查数据库**，导致数据库CPU和内存负载过高，甚至宕机。

##### 缓存雪崩解决方案

1. 缓存的高可用性
2. 缓存降级
3. Redis备份和快速预热


#### 2.缓存穿透
缓存穿透是指查询一个一不存在的数据。例如：从缓存redis没有***，需要从mysql数据库查询，查不到数据则不写入缓存，这将导致这个**不存在的数据每次请求都要到数据库去查询，造成缓存穿透。**  
解决思路：  
**如果查询数据库也为空，直接设置一个默认值存放到缓存**，这样第二次到缓冲中获取就有值了，而不会继续访问数据库。设置一个过期时间或者当有值的时候将缓存中的值替换掉即可。  
可以给key设置一些格式规则，然后查询之前先过滤掉不符合规则的Key。  


#### 3.缓存并发
这里的并发指的是多个redis的client同时set key引起的并发问题。其实redis自身就是单线程操作，多个client并发操作，按照先到先执行的原则，先到的先执行，其余的阻塞。当然，另外的解决方案是把redis.set操作放在队列中使其串行化，必须的一个一个执行。  


#### 4.缓存预热
缓存预热就是系统上线后，将相关的缓存数据直接加载到缓存系统。  

这样就可以避免在用户请求的时候，先查询数据库，然后再将数据缓存的问题，用户直接查询事先被预热的缓存数据。

解决思路：  

1、直接写个缓存刷新页面，上线时手工操作下。

2、数据量不大，可以在项目启动的时候自动进行加载。

目的就是在系统上线前，将数据加载到缓存中。







